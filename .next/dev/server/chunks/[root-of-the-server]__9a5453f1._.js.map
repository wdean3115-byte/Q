{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/25LP5292/Desktop/Q/lib/prisma.ts"],"sourcesContent":["import { PrismaPg } from \"@prisma/adapter-pg\";\nimport { PrismaClient } from \"@prisma/client\";\nimport pg from \"pg\";\n\nconst { Pool } = pg;\nconst connectionString = process.env.DATABASE_URL;\nconst pool = new Pool({ connectionString });\nconst adapter = new PrismaPg(pool);\n\nconst globalForPrisma = global as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\n// Use 'export const' for a named export\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    adapter,\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,EAAE,IAAI,EAAE,GAAG,wJAAE;AACnB,MAAM;AACN,MAAM,OAAO,IAAI,KAAK;IAAE;AAAiB;AACzC,MAAM,UAAU,IAAI,yKAAQ,CAAC;AAE7B,MAAM;AAKC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf;AACF;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/25LP5292/Desktop/Q/app/api/users/sync/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { auth, currentUser } from \"@clerk/nextjs/server\";\nimport { prisma } from \"@/lib/prisma\";\n\nexport async function POST(req: Request) {\n  try {\n    const { userId } = await auth();\n\n    if (!userId) {\n      return new NextResponse(\"Unauthorized\", { status: 401 });\n    }\n\n    const clerkUser = await currentUser();\n    if (!clerkUser) {\n      return new NextResponse(\"User not found in Clerk\", { status: 404 });\n    }\n\n    const email = clerkUser.emailAddresses?.[0]?.emailAddress;\n    const name = `${clerkUser.firstName || \"\"} ${\n      clerkUser.lastName || \"\"\n    }`.trim();\n\n    // The upsert handles the \"if exists update, else create\" logic automatically\n    const user = await prisma.user.upsert({\n      where: { clerkId: userId },\n      update: {\n        email: email,\n        name: name || null,\n      },\n      create: {\n        clerkId: userId,\n        email: email,\n        name: name || null,\n      },\n    });\n\n    return NextResponse.json(user, { status: 200 });\n  } catch (err: unknown) {\n    // Check for Prisma P2002 (Unique constraint failed)\n    if (\n      err &&\n      typeof err === \"object\" &&\n      \"code\" in err &&\n      err.code === \"P2002\"\n    ) {\n      console.error(\n        \"Conflict: Email already exists under a different clerkId.\"\n      );\n      return new NextResponse(\"Email already in use\", { status: 409 });\n    }\n\n    console.error(\"SYNC ERROR:\", err);\n    return new NextResponse(\"Internal Server Error\", { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;;;;;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,6LAAI;QAE7B,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,gJAAY,CAAC,gBAAgB;gBAAE,QAAQ;YAAI;QACxD;QAEA,MAAM,YAAY,MAAM,IAAA,2MAAW;QACnC,IAAI,CAAC,WAAW;YACd,OAAO,IAAI,gJAAY,CAAC,2BAA2B;gBAAE,QAAQ;YAAI;QACnE;QAEA,MAAM,QAAQ,UAAU,cAAc,EAAE,CAAC,EAAE,EAAE;QAC7C,MAAM,OAAO,GAAG,UAAU,SAAS,IAAI,GAAG,CAAC,EACzC,UAAU,QAAQ,IAAI,IACtB,CAAC,IAAI;QAEP,6EAA6E;QAC7E,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,OAAO;gBAAE,SAAS;YAAO;YACzB,QAAQ;gBACN,OAAO;gBACP,MAAM,QAAQ;YAChB;YACA,QAAQ;gBACN,SAAS;gBACT,OAAO;gBACP,MAAM,QAAQ;YAChB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,KAAc;QACrB,oDAAoD;QACpD,IACE,OACA,OAAO,QAAQ,YACf,UAAU,OACV,IAAI,IAAI,KAAK,SACb;YACA,QAAQ,KAAK,CACX;YAEF,OAAO,IAAI,gJAAY,CAAC,wBAAwB;gBAAE,QAAQ;YAAI;QAChE;QAEA,QAAQ,KAAK,CAAC,eAAe;QAC7B,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}