{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/25LP5292/Desktop/Q/lib/prisma.ts"],"sourcesContent":["import { PrismaPg } from \"@prisma/adapter-pg\";\nimport { PrismaClient } from \"@prisma/client\";\nimport pg from \"pg\";\n\nconst { Pool } = pg;\nconst connectionString = process.env.DATABASE_URL;\nconst pool = new Pool({ connectionString });\nconst adapter = new PrismaPg(pool);\n\nconst globalForPrisma = global as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\n// Use 'export const' for a named export\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    adapter,\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,EAAE,IAAI,EAAE,GAAG,wJAAE;AACnB,MAAM;AACN,MAAM,OAAO,IAAI,KAAK;IAAE;AAAiB;AACzC,MAAM,UAAU,IAAI,yKAAQ,CAAC;AAE7B,MAAM;AAKC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf;AACF;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/25LP5292/Desktop/Q/lib/openai.ts"],"sourcesContent":["import { GoogleGenerativeAI } from \"@google/generative-ai\";\n\nif (!process.env.API_KEY) {\n  throw new Error(\"GEMINI_API_KEY is missing\");\n}\n\nexport const genAI = new GoogleGenerativeAI(process.env.API_KEY);\nexport const geminiModel = genAI.getGenerativeModel({\n  model: \"gemini-2.5-flash\",\n});\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA;;AAIO,MAAM,QAAQ,IAAI,sLAAkB;AACpC,MAAM,cAAc,MAAM,kBAAkB,CAAC;IAClD,OAAO;AACT"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/25LP5292/Desktop/Q/app/api/quizzes/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { auth } from \"@clerk/nextjs/server\";\nimport { prisma } from \"@/lib/prisma\";\nimport { geminiModel } from \"@/lib/openai\";\n\nexport async function POST(req: Request) {\n  try {\n    const { userId } = await auth();\n    if (!userId) return new NextResponse(\"Unauthorized\", { status: 401 });\n\n    const { articleId } = await req.json();\n\n    const article = await prisma.article.findUnique({\n      where: { id: articleId },\n    });\n\n    if (!article || !article.summary) {\n      return new NextResponse(\"Article not found\", { status: 404 });\n    }\n\n    const prompt = `\n      Дараах текст дээр үндэслэн 5 асуулттай quiz үүсгэ. \n      JSON форматтай байх ёстой. Илүү текст бичиж болохгүй.\n      Бүтэц:\n      [\n        {\n          \"question\": \"Асуултын текст\",\n          \"options\": [\"Сонголт 1\", \"Сонголт 2\", \"Сонголт 3\", \"Сонголт 4\"],\n          \"answer\": \"Зөв хариултын текст (options доторх үгтэй яг ижил байх)\"\n        }\n      ]\n\n      Текст: ${article.summary}\n    `;\n\n    const result = await geminiModel.generateContent(prompt);\n    const text = result.response\n      .text()\n      .replace(/```json|```/g, \"\")\n      .trim();\n    const questions = JSON.parse(text);\n\n    const quiz = await prisma.quiz.create({\n      data: {\n        articleId,\n        questions,\n      },\n    });\n\n    return NextResponse.json(quiz, { status: 201 });\n  } catch (err) {\n    console.error(\"QUIZ ERROR:\", err);\n    return new NextResponse(\"Server error\", { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAA,6LAAI;QAC7B,IAAI,CAAC,QAAQ,OAAO,IAAI,gJAAY,CAAC,gBAAgB;YAAE,QAAQ;QAAI;QAEnE,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,IAAI;QAEpC,MAAM,UAAU,MAAM,yHAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC9C,OAAO;gBAAE,IAAI;YAAU;QACzB;QAEA,IAAI,CAAC,WAAW,CAAC,QAAQ,OAAO,EAAE;YAChC,OAAO,IAAI,gJAAY,CAAC,qBAAqB;gBAAE,QAAQ;YAAI;QAC7D;QAEA,MAAM,SAAS,CAAC;;;;;;;;;;;;aAYP,EAAE,QAAQ,OAAO,CAAC;IAC3B,CAAC;QAED,MAAM,SAAS,MAAM,8HAAW,CAAC,eAAe,CAAC;QACjD,MAAM,OAAO,OAAO,QAAQ,CACzB,IAAI,GACJ,OAAO,CAAC,gBAAgB,IACxB,IAAI;QACP,MAAM,YAAY,KAAK,KAAK,CAAC;QAE7B,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBACJ;gBACA;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,eAAe;QAC7B,OAAO,IAAI,gJAAY,CAAC,gBAAgB;YAAE,QAAQ;QAAI;IACxD;AACF"}}]
}