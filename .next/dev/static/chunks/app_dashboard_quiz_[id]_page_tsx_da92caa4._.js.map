{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/25LP5292/Desktop/Q/app/dashboard/quiz/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\n\ninterface Question {\n  question: string;\n  options: string[];\n  answer: string;\n}\n\nexport default function QuizPage() {\n  const { id } = useParams();\n  const router = useRouter();\n\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [selectedAnswers, setSelectedAnswers] = useState<string[]>([]);\n  const [isFinished, setIsFinished] = useState(false);\n  const [score, setScore] = useState(0);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchQuiz = async () => {\n      try {\n        const res = await fetch(`/api/quizzes/${id}`);\n        if (!res.ok) throw new Error(\"Quiz-–∏–π–≥ –∞—á–∞–∞–ª–∂ —á–∞–¥—Å–∞–Ω–≥“Ø–π\");\n        const data = await res.json();\n        setQuestions(data.questions as Question[]);\n      } catch (err) {\n        alert(\"–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞\");\n        router.push(\"/dashboard\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchQuiz();\n  }, [id, router]);\n\n  const handleAnswer = async (option: string) => {\n    const newAnswers = [...selectedAnswers, option];\n    setSelectedAnswers(newAnswers);\n\n    if (currentStep < questions.length - 1) {\n      setCurrentStep(currentStep + 1);\n    } else {\n      let finalScore = 0;\n      questions.forEach((q, index) => {\n        if (q.answer === newAnswers[index]) finalScore++;\n      });\n\n      setScore(finalScore);\n      setIsFinished(true);\n\n      try {\n        await fetch(\"/api/attempts\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            quizId: id,\n            userAnswers: newAnswers,\n            score: finalScore,\n          }),\n        });\n      } catch (err) {\n        console.error(\"“Æ—Ä –¥“Ø–Ω —Ö–∞–¥–≥–∞–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:\", err);\n      }\n    }\n  };\n\n  if (loading)\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-black\"></div>\n      </div>\n    );\n\n  // --- –®–ò–ù–≠–ß–õ–≠–ì–î–°–≠–ù “Æ–† –î“Æ–ù–ì–ò–ô–ù –•–≠–°–≠–ì ---\n  if (isFinished) {\n    return (\n      <div className=\"max-w-2xl mx-auto space-y-6 pb-12\">\n        <div className=\"bg-white p-8 rounded-2xl shadow-sm text-center border border-gray-100\">\n          <div className=\"text-5xl mb-4\">üéâ</div>\n          <h2 className=\"text-2xl font-bold mb-2 text-gray-900\">\n            Quiz –î—É—É—Å–ª–∞–∞!\n          </h2>\n          <p className=\"text-gray-500 mb-6\">–¢–∞–Ω—ã –∞–≤—Å–∞–Ω –æ–Ω–æ–æ:</p>\n          <div className=\"text-6xl font-black text-black mb-8\">\n            {score}{\" \"}\n            <span className=\"text-2xl text-gray-400\">/ {questions.length}</span>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <button\n              onClick={() => window.location.reload()}\n              className=\"py-3 border border-gray-200 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n            >\n              –î–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ—Ö\n            </button>\n            <button\n              onClick={() => router.push(\"/dashboard\")}\n              className=\"py-3 bg-black text-white rounded-xl font-medium hover:bg-gray-800 transition-colors\"\n            >\n              –ë—É—Ü–∞—Ö\n            </button>\n          </div>\n        </div>\n\n        {/* –ê—Å—É—É–ª—Ç –±“Ø—Ä–∏–π–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–∞–π–ª–±–∞—Ä */}\n        <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden\">\n          <div className=\"p-6 border-b border-gray-50\">\n            <h3 className=\"font-bold text-gray-900\">–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–æ–π–º</h3>\n          </div>\n          <div className=\"divide-y divide-gray-100\">\n            {questions.map((q, index) => {\n              const isCorrect = q.answer === selectedAnswers[index];\n              return (\n                <div key={index} className=\"p-6 space-y-3\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"mt-1\">\n                      {isCorrect ? (\n                        <div className=\"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            strokeWidth={3}\n                            stroke=\"currentColor\"\n                            className=\"w-3.5 h-3.5\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              d=\"M4.5 12.75l6 6 9-13.5\"\n                            />\n                          </svg>\n                        </div>\n                      ) : (\n                        <div className=\"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center text-red-600\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            strokeWidth={3}\n                            stroke=\"currentColor\"\n                            className=\"w-3.5 h-3.5\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              d=\"M6 18L18 6M6 6l12 12\"\n                            />\n                          </svg>\n                        </div>\n                      )}\n                    </div>\n                    <div>\n                      <p className=\"font-semibold text-gray-900 leading-tight\">\n                        {index + 1}. {q.question}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"ml-9 space-y-1.5\">\n                    <p\n                      className={`text-sm ${\n                        isCorrect ? \"text-green-700\" : \"text-red-700\"\n                      }`}\n                    >\n                      <span className=\"font-medium\">–¢–∞–Ω—ã —Ö–∞—Ä–∏—É–ª—Ç:</span>{\" \"}\n                      {selectedAnswers[index]}\n                    </p>\n                    {!isCorrect && (\n                      <p className=\"text-sm text-green-700 bg-green-50/50 py-1 px-3 rounded-lg inline-block\">\n                        <span className=\"font-medium\">–ó”©–≤ —Ö–∞—Ä–∏—É–ª—Ç:</span>{\" \"}\n                        {q.answer}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // --- QUIZ –Ø–í–ê–ì–î–ê–ñ –ë–ê–ô–ì–ê–ê –•–≠–°–≠–ì (”®”®–†–ß–õ”®”®–ì“Æ–ô) ---\n  const q = questions[currentStep];\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"w-full bg-gray-200 h-1.5 rounded-full mb-8\">\n        <div\n          className=\"bg-black h-1.5 rounded-full transition-all duration-300\"\n          style={{ width: `${((currentStep + 1) / questions.length) * 100}%` }}\n        ></div>\n      </div>\n\n      <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100\">\n        <div className=\"mb-8\">\n          <span className=\"text-xs font-bold text-blue-600 uppercase tracking-widest\">\n            –ê—Å—É—É–ª—Ç {currentStep + 1}\n          </span>\n          <h2 className=\"text-2xl font-semibold mt-2 text-gray-900 leading-tight\">\n            {q.question}\n          </h2>\n        </div>\n\n        <div className=\"grid gap-3\">\n          {q.options.map((option, i) => (\n            <button\n              key={i}\n              onClick={() => handleAnswer(option)}\n              className=\"w-full text-left p-5 border border-gray-200 rounded-xl hover:border-black hover:bg-gray-50 transition-all duration-200 group flex justify-between items-center\"\n            >\n              <span className=\"font-medium text-gray-700\">{option}</span>\n              <div className=\"w-5 h-5 border rounded-full group-hover:border-black transition-colors\"></div>\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}